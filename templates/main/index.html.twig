{% extends 'base.html.twig' %}

{% block title %} {{ parent() }} | Accueil{% endblock %}

{% block body %}


<div class="example-wrapper">
    <p> Date du jour : {{ "now"|date("d/m/Y") }}</p>
    <p> Participant : <b>{{ app.user.prenom }} {{ app.user.prenom | first }}.</b></p>

    <di>
        Filtrer les sorties :
        <form>
            Campus :
            <select id="campus">
                {% for campus in campus %}
                    <option>{{ campus.nom }}</option>
                {% endfor %}
            </select>
            Le nom de la sortie contient :
            Entre <input type="datetime-local">
            et <input type="datetime-local">
        </form>
    </di>


    <div  class="table-responsive">
        <table  class="table table-striped">
            <thead class="thead-light">
            <tr>
                <th scope="col">Nom de la sortie</th>
                <th scope="col">Date de la sortie</th>
                <th scope="col">Cl√¥ture</th>
                <th scope="col">inscrits/places</th>
                <th scope="col">Etat</th>
                <th scope="col">Inscrit</th>
                <th scope="col">organisateur</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            {% if sorties %}
                {%  for sortie in sorties %}
                    <tbody>
                    <tr>
                        <td>{{ sortie.nom }}</td>
                        <td>{{ sortie.dateHeureDebut |date }}</td>
                        <td>{{ sortie.dateLimiteInscription |date }}</td>
                        <td>{{ sortie.participants.count }}/{{ sortie.nbInscriptionMax }}</td>
                        <td>{{ sortie.etat.libelle }}</td>
                        <td>
                            {% if sortie.participants.contains(app.user) %}
                                X
                            {% endif %}
                        </td>
                        <td>{{ sortie.organisateur.nom }}</td>
                        <td>//todo ajouter action</td>
                    </tr>
                    </tbody>
                {%  endfor %}
            {% else %}
                <p>Pas de sorties pour l'instant</p>
            {%  endif %}
        </table>
    </div>
</div>
{% endblock %}
